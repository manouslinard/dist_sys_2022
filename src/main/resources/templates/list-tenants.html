<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0 user-scalable=no">
<title>Tenant List</title>
<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
<script th:src="@{/js/app.js}"></script>
</head>
<body>
	<div th:replace="page_layout/slider-header :: header"></div>
	<div th:if="${ not#lists.isEmpty(tenants)}">
		<table id="listTable">
			<thead>
				<tr>
					<th scope="col">Username</th>
					<th scope="col">First Name</th>
					<th scope="col">Last Name</th>
					<th scope="col">Email</th>
					<th sec:authorize="hasRole('ADMIN')" scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="tenant : ${tenants}">
					<td th:text="${tenant.username}"></td>
					<td th:text="${tenant.firstName}"></td>
					<td th:text="${tenant.lastName}"></td>
					<td th:text="${tenant.email}"></td>
					<td sec:authorize="hasRole('ADMIN')">
						<button class="table-button-del" type="submit" th:id="${tenant.id}"
							name="deleteTenant">Delete</button>
					</td>
				</tr>
			</tbody>
		</table>

		<script type="text/javascript">
			$("[name='deleteTenant']").click(function() {
				var urlCall = "/user/tenant/";
				$.ajax({
					url : urlCall + $(this).attr('id'),
					type : 'DELETE',
					success : function(result) {
						console.log(result);
						$(location).attr("href", value = "/tenantlist");
					},
					error : function(result) {
						console.log(result);
					},
				});
			});
		</script>

	</div>
	<script>
		// light-dark mode:
		let slider = document.getElementById("myRange");
		let body = document.querySelector("body");
		initializeBrightnessSlider(slider);
	</script>
</body>
</html>